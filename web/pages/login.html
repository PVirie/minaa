<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="description" content="Minaa - Chatavut" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Minaa - Chatavut</title>
        <!-- icon link -->
        <link rel="icon" href="/resources/Virie_symbol_2023.svg" />
        <link rel="stylesheet" href="/styles/theme.css" />
        <link rel="stylesheet" href="/styles/login.css" />
        <link rel="stylesheet" href="/styles/card.css" />
        <link rel="stylesheet" href="/styles/animation.css" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    </head>
    <body class="container center secondary bg-1">
        <div class="card primary primary-enter">
            <h2>Please enter credential</h2>
            <div>
                <input type="password" id="password" placeholder="Password" />
                <input type="button" id="submit" value="Go" />
            </div>
        </div>
        <script>
            window.addEventListener("load", async function (e) {
                const password = document.getElementById("password");
                const submit = document.getElementById("submit");
                submit.addEventListener("click", async function (e) {
                    try {
                        const r = await fetch("/login", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify(password.value),
                        });

                        // handle redirect
                        if (r.redirected) {
                            window.location.href = r.url;
                        }
                    } catch (e) {
                        console.log(e);
                    }
                });
            });
        </script>
    </body>
</html>
